---
# ========================================================================
# SERVICENOW TICKET HANDLER
# ========================================================================
# Creates ServiceNow incident ticket when automation fails
# Requires: snow_config and context variables
# ========================================================================

- name: "Debug ServiceNow ticket creation"
  debug:
    msg:
      - "=========================================="
      - "ServiceNow Ticket Creation"
      - "=========================================="
      - "Automation: {{ context.automation_name }}"
      - "Display Name: {{ context.display_name }}"
      - "Status: {{ context.status }}"
      - "Error: {{ context.error_message }}"
      - "SNOW Config: {{ snow_config }}"
      - "=========================================="
      - "NOTE: ServiceNow ticket creation logic to be implemented"
      - "This requires SNOW API credentials and endpoint configuration"
  ignore_errors: true

# TODO: Implement ServiceNow REST API integration
# Example integration points:
# - Use snow_config to determine SNOW instance (prod, dev, test)
# - POST to /api/now/table/incident
# - Include automation details in incident description
# - Set priority based on severity
# - Assign to appropriate group
# - Link to automation logs/job details

- name: "Placeholder - ServiceNow ticket not created"
  debug:
    msg: "⚠️ ServiceNow ticket handler not yet implemented. Configure SNOW API integration."
  ignore_errors: true
